---
title: 00.浏览器线程的知识
categories:
  - 01.开发学习笔记 markdown
  - 06.JavaScript
  - 00.浏览器相关
---

# 线程知识储备
理解异步模型、事件循环首先要懂浏览器线程调度的知识，至少了解基本规则和调度顺序。

js引擎是单线程的，但是浏览器的整个内核是多线程的，它们在内核控制下相互配合以保持同步，一个浏览器通常由以下常驻线程组成：GUI 渲染线程，javascript 引擎线程，浏览器事件触发线程，定时触发器线程，异步 http 请求线程。

浏览器内核各家都不一样 一般就指渲染引擎和js引擎的结合。
chrome对webkit内核的js引擎不满，自己写了个V8引擎，这后来变成node.js的支柱实现。

**GUI 渲染线程**：负责渲染浏览器界面 HTML 元素,当界面初始渲染或者需要重绘(Repaint)或由于某种操作引发回流(reflow)时,该线程就会执行。在 Javascript 引擎运行脚本期间, GUI 渲染线程都是处于挂起状态的,也就是说被”冻结”。即 GUI 渲染线程与 JS 引擎是互斥的，当JS引擎执行时GUI线程会被挂起，GUI 更新会被保存在一个队列中等到 JS 引擎空闲时立即被执行。

**javascript 引擎线程**：也可以称为 JS 内核，主要负责处理 Javascript 脚本程序，例如 V8 引擎。Javascript 引擎线程理所当然是负责解析 Javascript 脚本，运行代码。浏览器无论什么时候都只有一个 JS 线程在运行 JS 程序。

**浏览器事件触发线程**：当一个事件被触发时该线程会把事件添加到待处理队列的队尾，等待 JS 引擎的处理。这些事件可以是当前执行的代码块如定时任务、也可来自浏览器内核的其他线程如鼠标点击、AJAX 异步请求等，但由于JS的单线程关系所有这些事件都得排队等待 JS 引擎处理。

**定时触发器线程**：浏览器定时计数器并不是由JavaScript 引擎计数的, 因为 javaScript 引擎是单线程的, 如果处于阻塞线程状态就会影响记计时的准确, 因此通过单独线程来计时并触发定时是更为合理的方案。

**异步 http 请求线程**：在 XMLHttpRequest 在连接后是通过浏览器新开一个线程请求， 将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件放到 JavaScript 引擎的处理队列中等待处理。


异步事件其实都有专门的线程去处理，和主线程分开，这样就很好理解同步任务和异步任务结合的代码是如何处理的。